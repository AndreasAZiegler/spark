---
- name: Install otf-font-awesome
  pacman: name=otf-font-awesome state=present

- name: Get dwmblocks
  ansible.builtin.git:
    repo: 'https://github.com/AndreasAZiegler/dwmblocks.git'
    version: own_config
    dest: "~/.local/src/dwmblocks"

- name: Run 'install' target as root
  community.general.make:
    chdir: "~/.local/src/dwmblocks"
    target: install
  become: yes

- name: Get dmenu
  ansible.builtin.git:
    repo: 'https://github.com/LukeSmithxyz/dmenu.git'
    dest: "~/.local/src/dmenu"

- name: Run 'install' target as root
  community.general.make:
    chdir: "~/.local/src/dmenu"
    target: install
  become: yes

- name: Install libxft-bgra
  aur:
    name: libxft-bgra
    user: "{{ user.name }}"
  tags:
    - aur

- name: Get st
  ansible.builtin.git:
    repo: 'https://github.com/LukeSmithxyz/st.git'
    dest: "~/.local/src/st"

- name: Run 'install' target as root
  community.general.make:
    chdir: "~/.local/src/st"
    target: install
  become: yes

- name: Get dwm
  ansible.builtin.git:
    repo: 'https://github.com/AndreasAZiegler/dwm.git'
    version: own_config
    dest: "~/.local/src/dwm"

- name: Run 'install' target as root
  community.general.make:
    chdir: "~/.local/src/dwm"
    target: install
  become: yes

- name: Create xsessions profile directory
  file:
    path: /usr/share/xsessions
    state: directory

- name: Install dwm session profile
  copy: src=dwm.desktop dest=/usr/share/xsessions/dwm.desktop
